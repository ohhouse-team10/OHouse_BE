name: test code

on:
  pull_request:
    branches:
      - main

# 본인이 설정한 값을 여기서 채워넣습니다.
# 리전, 버킷 이름, CodeDeploy 앱 이름, CodeDeploy 배포 그룹 이름
jobs:
  test: 
    # head_commit.message가 '[Test]' 로 시작하면 실행
    if: ${{ !startsWith(github.event.pull_request.message, '[SKIP]') }}
    runs-on: ubuntu-latest 
    steps:
    # (1) 기본 체크아웃
    - name: Checkout
      uses: actions/checkout@v3

    # (2) JDK 11 세팅
    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: '11'

    # (3) Gradle test
    - name: Grant execute permission for gradlew
      run: chmod +x gradlew
      
    - name: Test with Gradle
      run: ./gradlew test
